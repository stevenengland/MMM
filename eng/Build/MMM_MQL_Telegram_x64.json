{"options":[{"enabled":true,"definition":{"id":"5d58cc01-7c75-450c-be18-a388ddb129ec"},"inputs":{"branchFilters":"[\"+refs/heads/*\"]","additionalFields":"{}"}},{"enabled":false,"definition":{"id":"a9db38f9-9fdc-478c-b0f9-464221e58316"},"inputs":{"workItemType":"Bug","assignToRequestor":"true","additionalFields":"{}"}}],"triggers":[{"branchFilters":["-releases/*","-master","+*"],"pathFilters":["+src/StEn.MMM/Mql.Telegram/*","+src/StEn.MMM.Test/Mql.Telegram.Test/*","+src/StEn.MMM.Test/Mql.Telegram.IntegrationTests/*"],"batchChanges":false,"maxConcurrentBuildsPerBranch":1,"pollingInterval":0,"triggerType":2}],"variables":{"SolutionDir":{"value":"$(Build.Repository.LocalPath)/src/"},"system.debug":{"value":"false","allowOverride":true},"Variable.AllProjectFilter":{"value":"**/Mql.Telegram*.csproj"},"Variable.AssemblyName":{"value":"Mql_Telegram"},"Variable.BuildConfiguration":{"value":"release","allowOverride":true},"Variable.BuildPlatform":{"value":"x64","allowOverride":true},"Variable.NonTestProjectFilter":{"value":"**/Mql.Telegram.csproj"},"Variable.VersionRevision":{"value":"$[counter(format('{0:yyyyMMdd}', pipeline.startTime), 0)]"}},"variableGroups":[{"variables":{"Telegram_Bot_Api_Key":{"value":null,"isSecret":true},"Telegram_Bot_Id":{"value":null,"isSecret":true},"Telegram_Bot_Name":{"value":null,"isSecret":true},"Telegram_Channel_Id":{"value":null,"isSecret":true},"Telegram_Channel_Name":{"value":null,"isSecret":true},"Telegram_Group_id":{"value":null,"isSecret":true},"Telegram_User_Id":{"value":null,"isSecret":true},"Telegram_User_Name":{"value":null,"isSecret":true}},"type":"Vsts","name":"MMM Telegram Secrets","id":1}],"properties":{},"tags":[],"_links":{"self":{"href":"https://dev.azure.com/StEnPublic/2be4f0a7-212b-422d-9312-04e8fb57c53a/_apis/build/Definitions/6?revision=5"},"web":{"href":"https://dev.azure.com/StEnPublic/2be4f0a7-212b-422d-9312-04e8fb57c53a/_build/definition?definitionId=6"},"editor":{"href":"https://dev.azure.com/StEnPublic/2be4f0a7-212b-422d-9312-04e8fb57c53a/_build/designer?id=6&_a=edit-build-definition"},"badge":{"href":"https://dev.azure.com/StEnPublic/2be4f0a7-212b-422d-9312-04e8fb57c53a/_apis/build/status/6"}},"buildNumberFormat":"$(date:yyyyMMdd)$(rev:.r)","jobAuthorizationScope":1,"jobTimeoutInMinutes":60,"jobCancelTimeoutInMinutes":5,"badgeEnabled":true,"process":{"phases":[{"steps":[{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"PowerShell Script - Create var Variable.VersionBuildId","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","versionSpec":"2.*","definitionType":"task"},"inputs":{"targetType":"inline","filePath":"","arguments":"","script":"# Write your PowerShell commands here.\n# $(Variable.VersionRevision) is a counter that is reset every day and declared as variable\n   \n$DaysSince=((get-date)-(get-date \"12/31/2000\")).Days\necho \"##vso[task.setvariable variable=Variable.VersionBuildId]$DaysSince.$(Variable.VersionRevision)\"\n","errorActionPreference":"stop","failOnStderr":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":""}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"PowerShell Script - Print Variable.VersionBuildId","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","versionSpec":"2.*","definitionType":"task"},"inputs":{"targetType":"inline","filePath":"","arguments":"","script":"# Write your PowerShell commands here.\n\nWrite-Host  \"Variable.VersionRevision is: $env:Variable.VersionBuildId\"\n","errorActionPreference":"stop","failOnStderr":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":""}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Version Assemblies (AssemblyVersion) using $(Variable.NonTestProjectFilter)","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"5b4d14d0-3868-11e4-a31d-3f0a2d8202f4","versionSpec":"2.*","definitionType":"task"},"inputs":{"sourcePath":"","filePattern":"$(Variable.NonTestProjectFilter)","versionSource":"variable","customNumberVariable":"Variable.VersionBuildId","versionFormat":"custom","customBuildRegex":"(\\d+).(\\d+)","replaceVersionFormat":"custom","customReplaceRegex":"\\d+\\.\\d+\\<\\/AssemblyVersion\\>","buildRegexIndex":"0","replacePrefix":"","replacePostfix":"</AssemblyVersion>","failIfNoMatchFound":"false"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Version Assemblies (FileVersion) using $(Variable.NonTestProjectFilter)","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"5b4d14d0-3868-11e4-a31d-3f0a2d8202f4","versionSpec":"2.*","definitionType":"task"},"inputs":{"sourcePath":"","filePattern":"$(Variable.NonTestProjectFilter)","versionSource":"variable","customNumberVariable":"Variable.VersionBuildId","versionFormat":"custom","customBuildRegex":"(\\d+).(\\d+)","replaceVersionFormat":"custom","customReplaceRegex":"\\d+\\.\\d+\\<\\/FileVersion\\>","buildRegexIndex":"0","replacePrefix":"","replacePostfix":"</FileVersion>","failIfNoMatchFound":"false"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Read AssemblyVersion","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"9d912aa0-a422-11e8-ab65-756997c8fe7a","versionSpec":"0.*","definitionType":"task"},"inputs":{"searchPattern":"$(Variable.NonTestProjectFilter)","variablePrefix":"Properties","propertyName":"AssemblyVersion","customPropertyName":""}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"PowerShell Script - Set Env-Vars","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","versionSpec":"2.*","definitionType":"task"},"inputs":{"targetType":"inline","filePath":"","arguments":"","script":"# Write your PowerShell commands here.\n\necho \"##vso[task.setvariable variable=SAFE_TELEGRAM_BOT_API_KEY]$(Telegram_Bot_Api_Key)\"\necho \"##vso[task.setvariable variable=SAFE_TELEGRAM_BOT_ID]$(Telegram_Bot_Id)\"\necho \"##vso[task.setvariable variable=SAFE_TELEGRAM_BOT_NAME]$(Telegram_Bot_Name)\"\necho \"##vso[task.setvariable variable=SAFE_TELEGRAM_USER_ID]$(Telegram_User_Id)\"\necho \"##vso[task.setvariable variable=SAFE_TELEGRAM_USER_NAME]$(Telegram_User_Name)\"\necho \"##vso[task.setvariable variable=SAFE_TELEGRAM_GROUP_ID]$(Telegram_Group_Id)\"\necho \"##vso[task.setvariable variable=SAFE_TELEGRAM_CHANNEL_ID]$(Telegram_Channel_Id)\"\necho \"##vso[task.setvariable variable=SAFE_TELEGRAM_CHANNEL_NAME]$(Telegram_Channel_Name)\"\n","errorActionPreference":"stop","failOnStderr":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":""}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Use .Net Core sdk 2.2.401","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"b0ce7256-7898-45d3-9cb5-176b752bfea6","versionSpec":"2.*","definitionType":"task"},"inputs":{"packageType":"sdk","useGlobalJson":"false","workingDirectory":"","version":"2.2.401","includePreviewVersions":"false","installationPath":"$(Agent.ToolsDirectory)/dotnet","performMultiLevelLookup":"false"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"dotnet restore","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"5541a522-603c-47ad-91fc-a4b1d163081b","versionSpec":"2.*","definitionType":"task"},"inputs":{"command":"restore","publishWebProjects":"true","projects":"$(Variable.AllProjectFilter)","custom":"","arguments":"","publishTestResults":"true","testRunTitle":"","zipAfterPublish":"true","modifyOutputPath":"true","selectOrConfig":"select","feedRestore":"","includeNuGetOrg":"true","nugetConfigPath":"","externalEndpoints":"","noCache":"false","packagesDirectory":"","verbosityRestore":"Detailed","searchPatternPush":"$(Build.ArtifactStagingDirectory)/*.nupkg","nuGetFeedType":"internal","feedPublish":"","publishPackageMetadata":"true","externalEndpoint":"","searchPatternPack":"**/*.csproj","configurationToPack":"$(Variable.BuildConfiguration)","outputDir":"$(Build.ArtifactStagingDirectory)","nobuild":"false","includesymbols":"false","includesource":"false","versioningScheme":"off","versionEnvVar":"","requestedMajorVersion":"1","requestedMinorVersion":"0","requestedPatchVersion":"0","buildProperties":"","verbosityPack":"Detailed","workingDirectory":""}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Build solution **/Mql.Telegram.IntegrationTests.csproj","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"c6c4c611-aa2e-4a33-b606-5eaba2196824","versionSpec":"1.*","definitionType":"task"},"inputs":{"solution":"**/Mql.Telegram.IntegrationTests.csproj","msbuildLocationMethod":"version","msbuildVersion":"16.0","msbuildArchitecture":"x86","msbuildLocation":"","platform":"$(Variable.BuildPlatform)","configuration":"$(Variable.BuildConfiguration)","msbuildArguments":"","clean":"false","maximumCpuCount":"false","restoreNugetPackages":"false","logProjectEvents":"false","createLogFile":"false","logFileVerbosity":"normal"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Build solution **/Mql.Telegram.Tests.csproj","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"c6c4c611-aa2e-4a33-b606-5eaba2196824","versionSpec":"1.*","definitionType":"task"},"inputs":{"solution":"**/Mql.Telegram.Tests.csproj","msbuildLocationMethod":"version","msbuildVersion":"16.0","msbuildArchitecture":"x86","msbuildLocation":"","platform":"$(Variable.BuildPlatform)","configuration":"$(Variable.BuildConfiguration)","msbuildArguments":"","clean":"false","maximumCpuCount":"false","restoreNugetPackages":"false","logProjectEvents":"false","createLogFile":"false","logFileVerbosity":"normal"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"VsTest - testAssemblies","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"ef087383-ee5e-42c7-9a53-ab56c98420f9","versionSpec":"2.*","definitionType":"task"},"inputs":{"testSelector":"testAssemblies","testAssemblyVer2":"**\\*Tests*.dll\n!**\\*TestAdapter.dll\n!**\\obj\\**","testPlan":"","testSuite":"","testConfiguration":"","tcmTestRun":"$(test.RunId)","searchFolder":"$(System.DefaultWorkingDirectory)","testFiltercriteria":"","runOnlyImpactedTests":"False","runAllTestsAfterXBuilds":"50","uiTests":"false","vstestLocationMethod":"version","vsTestVersion":"latest","vstestLocation":"","runSettingsFile":"","overrideTestrunParameters":"","pathtoCustomTestAdapters":"","runInParallel":"False","runTestsInIsolation":"False","codeCoverageEnabled":"False","otherConsoleOptions":"","distributionBatchType":"basedOnTestCases","batchingBasedOnAgentsOption":"autoBatchSize","customBatchSizeValue":"10","batchingBasedOnExecutionTimeOption":"autoBatchSize","customRunTimePerBatchValue":"60","dontDistribute":"False","testRunTitle":"","platform":"","configuration":"","publishRunAttachments":"true","diagnosticsEnabled":"false","collectDumpOn":"onAbortOnly","rerunFailedTests":"False","rerunType":"basedOnTestFailurePercentage","rerunFailedThreshold":"30","rerunFailedTestCasesMaxLimit":"5","rerunMaxAttempts":"3"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Copy Files to: $(Build.ArtifactStagingDirectory)","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","versionSpec":"2.*","definitionType":"task"},"inputs":{"SourceFolder":"","Contents":"**/Mql.Telegram/bin/**/$(Variable.AssemblyName).dll","TargetFolder":"$(Build.ArtifactStagingDirectory)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"true","preserveTimestamp":"false"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Archive $(Build.ArtifactStagingDirectory)","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"d8b84976-e99a-4b86-b885-4849694435b0","versionSpec":"2.*","definitionType":"task"},"inputs":{"rootFolderOrFile":"$(Build.ArtifactStagingDirectory)","includeRootFolder":"false","archiveType":"zip","tarCompression":"gz","archiveFile":"$(Build.ArtifactStagingDirectory)/$(Variable.AssemblyName)_$(Properties.AssemblyVersion)_$(Variable.BuildPlatform).zip","replaceExistingArchive":"true","verbose":"false","quiet":"false"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Publish Artifact: $(Variable.AssemblyName)_$(Variable.BuildPlatform)","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"2ff763a7-ce83-4e1f-bc89-0ae63477cebe","versionSpec":"1.*","definitionType":"task"},"inputs":{"PathtoPublish":"$(Build.ArtifactStagingDirectory)","ArtifactName":"$(Variable.AssemblyName)_$(Variable.BuildPlatform)","ArtifactType":"Container","TargetPath":"","Parallel":"false","ParallelCount":"8"}}],"name":"Agent job 1","refName":"Job_1","condition":"succeeded()","target":{"executionOptions":{"type":0},"allowScriptsAuthAccessOption":false,"type":1},"jobAuthorizationScope":1}],"target":{"agentSpecification":{"identifier":"windows-2019"}},"type":1},"repository":{"properties":{"apiUrl":"https://api.github.com/repos/stevenengland/MMM","branchesUrl":"https://api.github.com/repos/stevenengland/MMM/branches","cloneUrl":"https://github.com/stevenengland/MMM.git","connectedServiceId":"66c240e4-52cc-451b-819a-7f54f1107c1c","defaultBranch":"master","fullName":"stevenengland/MMM","hasAdminPermissions":"False","isFork":"False","isPrivate":"False","lastUpdated":"08/14/2019 16:08:51","manageUrl":"https://github.com/stevenengland/MMM","nodeId":"MDEwOlJlcG9zaXRvcnkxOTkzMDQyMDE=","ownerId":"11787949","orgName":"stevenengland","refsUrl":"https://api.github.com/repos/stevenengland/MMM/git/refs","safeRepository":"stevenengland/MMM","shortName":"MMM","ownerAvatarUrl":"https://avatars3.githubusercontent.com/u/11787949?v=4","archived":"False","externalId":"199304201","ownerIsAUser":"True","checkoutNestedSubmodules":"false","cleanOptions":"0","fetchDepth":"0","gitLfsSupport":"false","reportBuildStatus":"true","skipSyncSource":"false","labelSourcesFormat":"$(build.buildNumber)","labelSources":"0"},"id":"stevenengland/MMM","type":"GitHub","name":"stevenengland/MMM","url":"https://github.com/stevenengland/MMM.git","defaultBranch":"master","clean":"false","checkoutSubmodules":false},"processParameters":{},"quality":1,"authoredBy":{"displayName":"Steven England","url":"https://spsprodweu1.vssps.visualstudio.com/Af8dc3787-0b45-4451-b669-e16d6c44216a/_apis/Identities/73e963a9-69e3-6114-8479-c6742d01635c","_links":{"avatar":{"href":"https://dev.azure.com/StEnPublic/_apis/GraphProfile/MemberAvatars/msa.NzNlOTYzYTktNjllMy03MTE0LTg0NzktYzY3NDJkMDE2MzVj"}},"id":"73e963a9-69e3-6114-8479-c6742d01635c","uniqueName":"steven.england@t-online.de","imageUrl":"https://dev.azure.com/StEnPublic/_apis/GraphProfile/MemberAvatars/msa.NzNlOTYzYTktNjllMy03MTE0LTg0NzktYzY3NDJkMDE2MzVj","descriptor":"msa.NzNlOTYzYTktNjllMy03MTE0LTg0NzktYzY3NDJkMDE2MzVj"},"drafts":[],"queue":{"_links":{"self":{"href":"https://dev.azure.com/StEnPublic/_apis/build/Queues/18"}},"id":18,"name":"Azure Pipelines","url":"https://dev.azure.com/StEnPublic/_apis/build/Queues/18","pool":{"id":9,"name":"Azure Pipelines","isHosted":true}},"id":6,"name":"MMM_MQL_Telegram_x64","url":"https://dev.azure.com/StEnPublic/2be4f0a7-212b-422d-9312-04e8fb57c53a/_apis/build/Definitions/6?revision=5","uri":"vstfs:///Build/Definition/6","path":"\\Telegram","type":2,"queueStatus":0,"revision":5,"createdDate":"2019-08-20T08:01:13.200Z","project":{"id":"2be4f0a7-212b-422d-9312-04e8fb57c53a","name":"MMM","url":"https://dev.azure.com/StEnPublic/_apis/projects/2be4f0a7-212b-422d-9312-04e8fb57c53a","state":1,"revision":20,"visibility":2,"lastUpdateTime":"2019-07-28T17:05:38.950Z"}}